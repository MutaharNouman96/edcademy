<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ed‑Cademy — Student Dashboard</title>
  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />
  <style>
    :root {
      --primary: #6f42c1;      /* purple */
      --primary-dark: #4b2a87; /* darker purple */
      --primary-50: #f3e8ff;   /* very light purple */
      --ink: #1f2937;
      --muted: #6b7280;
      --bg: #f7f7fb;
      --accent: #00b3a4;      /* subtle cyan accent for badges/charts */
    }
    body { background: var(--bg); }
    .brand { color: var(--primary); font-weight: 700; }
    .header { position: sticky; top: 0; z-index: 1020; background: #fff; border-bottom: 1px solid rgba(0,0,0,.06); }
    .sidebar {
      position: sticky; top: 58px; height: calc(100dvh - 58px); overflow-y: auto;
      background: #fff; border-right: 1px solid rgba(0,0,0,.06);
    }
    .sidebar .nav-link { color: #4b5563; border-radius: .5rem; }
    .sidebar .nav-link.active { background: var(--primary-50); color: var(--primary-dark); font-weight: 600; }
    .sidebar .nav-link:hover { background: rgba(111,66,193,.08); color: var(--primary-dark); }
    .btn-primary { background: var(--primary); border-color: var(--primary); }
    .btn-primary:hover { background: var(--primary-dark); border-color: var(--primary-dark); }
    .btn-outline-primary { color: var(--primary); border-color: var(--primary); }
    .btn-outline-primary:hover { background: var(--primary); border-color: var(--primary); }
    .kpi-card { border: 0; border-radius: 16px; box-shadow: 0 6px 24px rgba(0,0,0,.06); }
    .kpi-icon { width: 44px; height: 44px; display:inline-flex; align-items:center; justify-content:center; border-radius:10px; background: var(--primary-50); color: var(--primary); }
    .card { border-radius: 16px; }
    .progress { height: 8px; }
    .course-card:hover { transform: translateY(-3px); box-shadow: 0 14px 28px rgba(0,0,0,.08); }
    .pill { padding: .15rem .5rem; border-radius: 9999px; font-size: .75rem; }
  </style>
</head>
<body>
  <!-- Top Header -->
  <header class="header py-2">
    <div class="container-fluid px-4">
      <div class="d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center gap-3">
          <a href="edcademy-landing.html" class="text-decoration-none brand">
            <i class="bi bi-mortarboard-fill me-2"></i>Ed‑Cademy
          </a>
          <span class="text-muted d-none d-md-inline">Student Dashboard</span>
        </div>
        <div class="d-flex align-items-center gap-2">
          <a class="btn btn-sm btn-outline-primary" href="browse-educators.html"><i class="bi bi-search me-1"></i> Browse</a>
          <a class="btn btn-sm btn-outline-primary" href="#section-messages"><i class="bi bi-chat-dots me-1"></i> Messages</a>
          <div class="dropdown">
            <button class="btn btn-light border dropdown-toggle" data-bs-toggle="dropdown">
              <i class="bi bi-person-circle me-1"></i> Niaz
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="#section-settings">Account Settings</a></li>
              <li><a class="dropdown-item" href="#section-payments">Billing</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item text-danger" href="#">Sign out</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <aside class="col-12 col-md-3 col-lg-2 sidebar p-3">
        <nav class="nav flex-column gap-1">
          <a class="nav-link active" href="#section-overview"><i class="bi bi-speedometer2 me-2"></i> Overview</a>
          <a class="nav-link" href="#section-my-courses"><i class="bi bi-journal-richtext me-2"></i> My Courses</a>
          <a class="nav-link" href="#section-new-videos"><i class="bi bi-camera-video me-2"></i> New Videos</a>
          <a class="nav-link" href="#section-progress"><i class="bi bi-graph-up-arrow me-2"></i> Analytics</a>
          <a class="nav-link" href="#section-certificates"><i class="bi bi-award me-2"></i> Certificates</a>
          <a class="nav-link" href="#section-payments"><i class="bi bi-wallet2 me-2"></i> Payments</a>
          <a class="nav-link" href="#section-wishlist"><i class="bi bi-heart me-2"></i> Wishlist</a>
          <a class="nav-link" href="#section-messages"><i class="bi bi-chat-dots me-2"></i> Messages</a>
          <a class="nav-link" href="#section-settings"><i class="bi bi-gear me-2"></i> Settings</a>
        </nav>
        <hr/>
        <div class="p-3 rounded" style="background: var(--primary-50);">
          <div class="d-flex align-items-start gap-2">
            <i class="bi bi-lightning-charge-fill text-warning fs-5"></i>
            <div>
              <strong>Keep the streak!</strong>
              <p class="mb-2 small">You're on a 4‑day study streak. Watch 20 min today to extend it.</p>
              <button class="btn btn-sm btn-primary w-100"><i class="bi bi-play-fill me-1"></i> Continue learning</button>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main -->
      <main class="col-12 col-md-9 col-lg-10 p-4">
        <!-- Overview / KPIs -->
        <section id="section-overview" class="mb-4">
          <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3">
            <h2 class="h4 mb-0">Overview</h2>
            <div class="input-group" style="max-width: 320px;">
              <span class="input-group-text bg-white"><i class="bi bi-search"></i></span>
              <input id="globalSearch" class="form-control" placeholder="Search your courses, lessons..." />
            </div>
          </div>

          <div class="row g-3">
            <div class="col-6 col-lg-3">
              <div class="card kpi-card p-3">
                <div class="d-flex align-items-center justify-content-between">
                  <span class="kpi-icon"><i class="bi bi-journal-richtext"></i></span>
                  <span class="pill" style="background:var(--primary-50); color:var(--primary-dark)">Enrolled</span>
                </div>
                <div class="mt-3">
                  <div class="h3 mb-0" id="kpiEnrolled">6</div>
                  <small class="text-muted">Active courses</small>
                </div>
              </div>
            </div>
            <div class="col-6 col-lg-3">
              <div class="card kpi-card p-3">
                <div class="d-flex align-items-center justify-content-between">
                  <span class="kpi-icon"><i class="bi bi-clock-history"></i></span>
                  <span class="pill" style="background:var(--primary-50); color:var(--primary-dark)">30 days</span>
                </div>
                <div class="mt-3">
                  <div class="h3 mb-0" id="kpiHours">18.6 h</div>
                  <small class="text-muted">Watched time</small>
                </div>
              </div>
            </div>
            <div class="col-6 col-lg-3">
              <div class="card kpi-card p-3">
                <div class="d-flex align-items-center justify-content-between">
                  <span class="kpi-icon"><i class="bi bi-check2-circle"></i></span>
                  <span class="pill" style="background:var(--primary-50); color:var(--primary-dark)">Avg</span>
                </div>
                <div class="mt-3">
                  <div class="h3 mb-0" id="kpiCompletion">54%</div>
                  <small class="text-muted">Completion rate</small>
                </div>
              </div>
            </div>
            <div class="col-6 col-lg-3">
              <div class="card kpi-card p-3">
                <div class="d-flex align-items-center justify-content-between">
                  <span class="kpi-icon"><i class="bi bi-wallet2"></i></span>
                  <span class="pill" style="background:var(--primary-50); color:var(--primary-dark)">Total</span>
                </div>
                <div class="mt-3">
                  <div class="h3 mb-0" id="kpiSpend">$186.00</div>
                  <small class="text-muted">Spent to date</small>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Charts Row -->
        <section id="section-progress" class="mb-4">
          <div class="row g-3">
            <div class="col-lg-8">
              <div class="card p-3">
                <div class="d-flex align-items-center justify-content-between">
                  <h5 class="mb-0">Course completion by course</h5>
                  <div class="d-flex gap-2">
                    <select id="progressSort" class="form-select form-select-sm" style="width:auto">
                      <option value="desc">Highest first</option>
                      <option value="asc">Lowest first</option>
                    </select>
                    <button class="btn btn-sm btn-outline-primary" id="refreshProgress"><i class="bi bi-arrow-clockwise"></i></button>
                  </div>
                </div>
                <canvas id="completionBar" height="130" class="mt-3"></canvas>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="card p-3 h-100">
                <h5 class="mb-0">Watch time (last 14 days)</h5>
                <canvas id="watchLine" height="160" class="mt-3"></canvas>
                <div class="mt-2 small text-muted">Minutes watched per day</div>
              </div>
            </div>
          </div>
        </section>

        <!-- New Videos Feed -->
        <section id="section-new-videos" class="mb-4">
          <div class="card p-3">
            <div class="d-flex align-items-center justify-content-between mb-2">
              <h3 class="h6 mb-0">New videos from your courses</h3>
              <a class="small" href="#">Manage notifications</a>
            </div>
            <ul class="list-group list-group-flush" id="newVideosList"></ul>
          </div>
        </section>

        <!-- My Courses -->
        <section id="section-my-courses" class="mb-4">
          <div class="d-flex align-items-center justify-content-between mb-2">
            <h3 class="h6 mb-0">My Courses</h3>
            <div class="input-group input-group-sm" style="max-width: 260px;">
              <span class="input-group-text bg-white"><i class="bi bi-search"></i></span>
              <input id="courseSearch" class="form-control" placeholder="Search title or subject" />
            </div>
          </div>
          <div class="row g-3" id="coursesGrid"></div>
        </section>

        <!-- Certificates / Payments Row -->
        <div class="row g-3">
          <section id="section-certificates" class="col-lg-5">
            <div class="card p-3 h-100">
              <div class="d-flex align-items-center justify-content-between mb-2">
                <h3 class="h6 mb-0">Certificates</h3>
                <a class="small" href="#">View all</a>
              </div>
              <ul class="list-group list-group-flush" id="certList">
                <!-- injected by JS -->
              </ul>
            </div>
          </section>
          <section id="section-payments" class="col-lg-7">
            <div class="card p-3 h-100">
              <div class="d-flex align-items-center justify-content-between mb-2">
                <h3 class="h6 mb-0">Payments</h3>
                <a class="small" href="#">Download invoices</a>
              </div>
              <div class="table-responsive">
                <table class="table align-middle" id="paymentsTable">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>Course</th>
                      <th>Method</th>
                      <th class="text-end">Amount</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </section>
        </div>

        <!-- Messages placeholder -->
        <section id="section-messages" class="mt-4">
          <div class="card p-3">
            <h3 class="h6 mb-1">Messages</h3>
            <p class="small text-muted mb-0">Open your inbox to chat with educators about assignments, feedback, and scheduling.</p>
          </div>
        </section>

        <!-- Settings placeholder -->
        <section id="section-settings" class="mt-3">
          <div class="card p-3">
            <h3 class="h6 mb-1">Settings</h3>
            <p class="small text-muted mb-0">Profile, notifications, language, time‑zone, and privacy controls.</p>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script>
    // ---------- Sample Data (replace with API sources) ----------
    const myCourses = [
      { id: 1, title: 'Calculus I — Limits & Derivatives', subject: 'Math', progress: 0.72, hours: 6.2, last: '2d ago', thumb: 'https://via.placeholder.com/320x180/ffffff/6f42c1?text=Math', newVideos: 1 },
      { id: 2, title: 'Physics: Mechanics (GCSE)', subject: 'Physics', progress: 0.36, hours: 3.1, last: '5h ago', thumb: 'https://via.placeholder.com/320x180/ffffff/6f42c1?text=Physics', newVideos: 0 },
      { id: 3, title: 'IELTS Speaking Mastery', subject: 'English', progress: 0.58, hours: 4.4, last: '1d ago', thumb: 'https://via.placeholder.com/320x180/ffffff/6f42c1?text=IELTS', newVideos: 2 },
      { id: 4, title: 'Organic Chemistry Basics', subject: 'Chemistry', progress: 0.21, hours: 1.0, last: '6d ago', thumb: 'https://via.placeholder.com/320x180/ffffff/6f42c1?text=Chem', newVideos: 0 },
      { id: 5, title: 'Algebra II — Functions', subject: 'Math', progress: 0.93, hours: 7.0, last: '3h ago', thumb: 'https://via.placeholder.com/320x180/ffffff/6f42c1?text=Algebra', newVideos: 0 },
      { id: 6, title: 'Essay Writing Bootcamp', subject: 'English', progress: 0.49, hours: 2.9, last: '4d ago', thumb: 'https://via.placeholder.com/320x180/ffffff/6f42c1?text=Writing', newVideos: 1 }
    ];

    const newVideos = [
      { course: 'IELTS Speaking Mastery', lesson: 'Band 7+ Part 2', when: '2 hours ago', duration: '9m', id: 'nv1' },
      { course: 'Calculus I — Limits & Derivatives', lesson: 'L\'Hôpital Rule Basics', when: 'Yesterday', duration: '12m', id: 'nv2' },
      { course: 'Essay Writing Bootcamp', lesson: 'Upgrade your Thesis', when: '2 days ago', duration: '7m', id: 'nv3' }
    ];

    const certificates = [
      { course: 'Algebra II — Functions', date: '2025‑09‑10', id: 'cert1' },
      { course: 'Intro to Data Literacy', date: '2025‑08‑02', id: 'cert2' }
    ];

    const payments = [
      { date: '2025‑09‑12', course: 'IELTS Speaking Mastery', method: 'Card •••• 4242', amount: 39.00 },
      { date: '2025‑09‑05', course: 'Organic Chemistry Basics', method: 'PayPal', amount: 35.00 },
      { date: '2025‑08‑28', course: 'Essay Writing Bootcamp', method: 'Card •••• 4242', amount: 19.00 },
      { date: '2025‑08‑20', course: 'Calculus I — Limits & Derivatives', method: 'Card •••• 4242', amount: 49.00 },
      { date: '2025‑08‑15', course: 'Physics: Mechanics (GCSE)', method: 'Card •••• 4242', amount: 39.00 },
      { date: '2025‑08‑02', course: 'Algebra II — Functions', method: 'Card •••• 4242', amount: 25.00 }
    ];

    // ---------- Populate UI ----------
    function renderCourses(list){
      const grid = document.getElementById('coursesGrid');
      grid.innerHTML = list.map(c => `
        <div class="col-sm-6 col-xl-4">
          <div class="card course-card h-100 border-0">
            <img src="${c.thumb}" class="card-img-top rounded-top" alt="${c.title}">
            <div class="card-body d-flex flex-column">
              <h6 class="mb-1">${c.title}</h6>
              <div class="small text-muted mb-2">${c.subject} • Last viewed ${c.last}</div>
              <div class="progress mb-2"><div class="progress-bar bg-primary" role="progressbar" style="width:${c.progress*100}%" aria-valuenow="${Math.round(c.progress*100)}" aria-valuemin="0" aria-valuemax="100"></div></div>
              <div class="d-flex justify-content-between small mb-3"><span>${Math.round(c.progress*100)}% complete</span><span>${c.hours.toFixed(1)} h watched</span></div>
              <div class="mt-auto d-flex gap-2">
                <a class="btn btn-sm btn-primary w-100"><i class="bi bi-play-fill me-1"></i> Resume</a>
                <button class="btn btn-sm btn-outline-primary" title="Course menu"><i class="bi bi-three-dots"></i></button>
              </div>
            </div>
            ${c.newVideos>0 ? `<span class="position-absolute top-0 end-0 m-2 badge text-bg-warning">${parseInt(c.newVideos)} new</span>`:''}
          </div>
        </div>`).join('');
    }

    function renderNewVideos(){
      const ul = document.getElementById('newVideosList');
      ul.innerHTML = newVideos.map(n => `
        <li class="list-group-item d-flex align-items-center justify-content-between">
          <div class="d-flex align-items-center gap-3">
            <div class="rounded border d-flex align-items-center justify-content-center" style="width:56px;height:36px;background:var(--primary-50);color:var(--primary)"><i class="bi bi-camera-video"></i></div>
            <div>
              <div class="fw-semibold">${n.lesson} <span class="text-muted">• ${n.duration}</span></div>
              <div class="small text-muted">${n.course} • ${n.when}</div>
            </div>
          </div>
          <div class="d-flex align-items-center gap-2">
            <button class="btn btn-sm btn-outline-primary"><i class="bi bi-plus-circle me-1"></i> Add to queue</button>
            <a class="btn btn-sm btn-primary"><i class="bi bi-play-fill me-1"></i> Watch</a>
          </div>
        </li>`).join('');
    }

    function renderCerts(){
      const ul = document.getElementById('certList');
      ul.innerHTML = certificates.map(c => `
        <li class="list-group-item d-flex align-items-center justify-content-between">
          <div>
            <div class="fw-semibold">${c.course}</div>
            <div class="small text-muted">Issued ${c.date}</div>
          </div>
          <div class="btn-group btn-group-sm">
            <button class="btn btn-outline-primary"><i class="bi bi-download"></i></button>
            <button class="btn btn-outline-primary"><i class="bi bi-box-arrow-up-right"></i></button>
          </div>
        </li>`).join('');
    }

    function renderPayments(){
      const tbody = document.querySelector('#paymentsTable tbody');
      tbody.innerHTML = payments.map(p => `
        <tr>
          <td>${p.date}</td>
          <td>${p.course}</td>
          <td>${p.method}</td>
          <td class="text-end">$${p.amount}</td>
        </tr>`).join('');
      const total = payments.reduce((a,b)=>a+b.amount,0);
      document.getElementById('kpiSpend').textContent = `$${total}`;
    }

    renderCourses(myCourses);
    renderNewVideos();
    renderCerts();
    renderPayments();

    // Search courses
    document.getElementById('courseSearch').addEventListener('input', (e)=>{
      const q = e.target.value.toLowerCase();
      renderCourses(myCourses.filter(c => c.title.toLowerCase().includes(q) || c.subject.toLowerCase().includes(q)));
    });

    // ---------- Charts ----------
    // Completion per course bar chart
    const compCtx = document.getElementById('completionBar');
    let courseOrder = [...myCourses];
    function drawCompletion(sort='desc'){
      courseOrder.sort((a,b)=> sort==='asc' ? a.progress - b.progress : b.progress - a.progress);
      const labels = courseOrder.map(c=> c.title.split(' — ')[0]);
      const data = courseOrder.map(c=> Math.round(c.progress*100));
      new Chart(compCtx, {
        type: 'bar',
        data: { labels, datasets: [{ label: 'Completion %', data, backgroundColor: 'rgba(111,66,193,.6)' }] },
        options: { responsive:true, plugins:{ legend:{ display:false } }, scales:{ y:{ beginAtZero:true, max:100 } } }
      });
    }
    drawCompletion();

    document.getElementById('progressSort').addEventListener('change', (e)=>{
      // destroy and redraw
      Chart.getChart(compCtx)?.destroy();
      drawCompletion(e.target.value);
    });

    // Watch time line
    const watchCtx = document.getElementById('watchLine');
    const labels = Array.from({length: 14}, (_, i) => `D-${14-i}`);
    const mins = labels.map(()=> Math.floor(10 + Math.random()*40));
    new Chart(watchCtx, {
      type: 'line',
      data: { labels, datasets: [{ label: 'Minutes', data: mins, tension:.35, borderColor: '#6f42c1', backgroundColor: 'rgba(111,66,193,.12)', fill: true, pointRadius: 0 }] },
      options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
    });

    // KPIs from data
    document.getElementById('kpiEnrolled').textContent = myCourses.length;
    const totalMins = mins.reduce((a,b)=>a+b,0) + myCourses.reduce((a,c)=>a + c.hours*60, 0);
    document.getElementById('kpiHours').textContent = (totalMins/60).toFixed(1) + ' h';
    const avgComp = Math.round(myCourses.reduce((a,c)=>a + c.progress, 0)/myCourses.length * 100);
    document.getElementById('kpiCompletion').textContent = avgComp + '%';

    // Refresh progress (demo)
    document.getElementById('refreshProgress').addEventListener('click', ()=>{
      // pretend new data: nudge progresses randomly
      myCourses.forEach(c=> c.progress = Math.min(1, Math.max(0, c.progress + (Math.random()*.1 - .05))));
      Chart.getChart(compCtx)?.destroy();
      drawCompletion(document.getElementById('progressSort').value);
      renderCourses(myCourses);
    });
  </script>
</body>
</html>
